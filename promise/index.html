<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Promises</title>
</head>

<body>
    <article>
        <h1>Promises</h1>
        <p>
            Promises are a new feature in the ES6 (ES2015) JavaScript spec that allow you to very easily deal with
            asynchronous code without resolving to multiple levels of callback functions.
            <br>
            A Promise is a proxy for a value not necessarily known when the promise is created. It allows you to
            associate handlers with an asynchronous action's eventual success value or failure reason. This lets
            asynchronous methods return values like synchronous methods: instead of immediately returning the final
            value, the asynchronous method returns a promise to supply the value at some point in the future.
            <br>
            A Promise is in one of these states:
            <br>
            <ul>
                <li>pending: initial state, neither fulfilled nor rejected.</li>
                <li>fulfilled: meaning that the operation completed successfully.</li>
                <li>rejected: meaning that the operation failed.</li>
            </ul>


            A pending promise can either be fulfilled with a value, or rejected with a reason (error). When either of
            these options happens, the associated handlers queued up by a promise's then method are called. (If the
            promise has already been fulfilled or rejected when a corresponding handler is attached, the handler will be
            called, so there is no race condition between an asynchronous operation completing and its handlers being
            attached.)

        </p>
        <h2>Chaining Promises</h2>

        <p>
            Promises can also be chained together with multiple then functions. The return value of a then becomes the
            value available to the next then in the chain:
        </p>
    </article>




    <script>
        //creating promise
        let myPromise = new Promise((resolve, reject) => {
            let data;
            // we use setTimeout(...) to simulate async code.
            // In reality, you will probably be using something like XHR or an HTML5 API.
            setTimeout(() => {
                data = "This is called after several seconds"

                if (data) {
                    resolve(data);
                } else {
                    reject();
                }
            }, 2000);
        });

        // Calling promise to get the data and check for error
        myPromise.then(data => {
            console.log('Received: ' + data)
        }).catch(() => {
            console.log("There was an error");
        });


        // Chaining Promises
        myPromise.then(data => {
            console.log('Received: ' + data);
            let moreData = "Another payload";
            return moreData;
        }).then(data => {
            console.log(data);
        }).catch(() => {
            console.log("There was an error");
        });

    </script>


</body>

</html>